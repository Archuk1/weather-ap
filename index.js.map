{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default async function getImagesByQuery(query, page){\n  const response = await axios.get(`https://pixabay.com/api/`, {\n  params: {\n    key: '53395315-8c17e52e5e4d7b2c0ffc17b33',\n    q: query,\n    image_type: 'photo',\n    safesearch: true,\n    orientation: 'horizontal',\n    page: page,\n    per_page: 15\n\n    \n  }\n })\n return response.data;\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.js-loadbtn')\n}\n\nlet modal = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt'});\n\n\nexport function createGallery(images) {\n\n  const markup = images\n    .map(\n      el => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${el.webformatURL}\"\n            alt=\"${el.tags}\"\n          />\n        </a>\n        <div class=\"info\">\n          <p><b>Likes</b> ${el.likes}</p>\n          <p><b>Views</b> ${el.views}</p>\n          <p><b>Comments</b> ${el.comments}</p>\n          <p><b>Downloads</b> ${el.downloads}</p>\n        </div>\n      </li>\n    `\n    )\n    .join(\"\");\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    modal.refresh();\n}\n\n\nexport function clearGallery(){\n    refs.gallery.innerHTML = \"\";\n};\n\nexport function showLoader(){\n refs.loader.classList.remove('hidden')\n};\n\nexport function hideLoader(){\n    refs.loader.classList.add('hidden')\n};\n\nexport function showLoadMoreButton(){\n  refs.loadMoreBtn.classList.remove('hidden')\n}\n\nexport function hideLoadMoreButton(){\n  refs.loadMoreBtn.classList.add('hidden')\n}","import getImagesByQuery from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createGallery, clearGallery,hideLoader,showLoader,showLoadMoreButton,hideLoadMoreButton } from \"./js/render-functions\";\n\nconst refs = {\n    form: document.querySelector('.form'),\n    loadMoreBtn: document.querySelector('.js-loadbtn'),\n}\n\nlet page;\nlet query;\nlet totalPage;\n\nrefs.form.addEventListener('submit', async e => {\n    e.preventDefault();\n    hideLoadMoreButton();\n    clearGallery();\n    showLoader();\n\n    page = 1;\n    query =  e.target.elements.searchText.value;\n\n    if (query.trim() === \"\") {\n        return iziToast.error({\n            message: 'Please enter query!',\n            position: 'topRight'\n        })\n    }\n    \n\ntry {   \n        const response = await getImagesByQuery(query,page);\n\n        totalPage = response.totalHits / 15;\n\n        if(response.totalHits == 0){\n            iziToast.error({\n                message:'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            })\n        } else if (page < totalPage) {\n            showLoadMoreButton()\n        } else {\n         iziToast.info({\n            message: `We're sorry, but you've reached the end of search results.`,\n            position: 'topRight'\n        })\n        };\n\n        createGallery(response.hits);   \n        hideLoader();\n\n} catch (err) {\n\n     hideLoader();\n     hideLoadMoreButton();\n\n     iziToast.error({message: err.message,\n        position: 'topRight'\n     })\n} \n\n    e.target.reset();\n})\n\n\n\n\n\n\nrefs.loadMoreBtn.addEventListener('click', async()=>{\n    page += 1;\n    hideLoadMoreButton();\n    \n    let  galleryCard = document.querySelector('.gallery-item');\n    let rect = galleryCard.getBoundingClientRect();\n\n  \n\n   try{\n    showLoader();\n     const response = await getImagesByQuery(query,page);\n    createGallery(response.hits)\n    hideLoader();\n    window.scrollBy({\n        top: rect.height * 2,\n        behavior: 'smooth',\n        \n    })\n    \n  \n    \n   } catch(err){\n\n    hideLoader();\n    hideLoadMoreButton();\n    \n    iziToast.error({\n        message:err,\n        position:'topRight'\n    })\n   }\n     if(page < totalPage){\n        showLoadMoreButton();\n    } else {\n         iziToast.info({\n            message: `We're sorry, but you've reached the end of search results.`,\n            position: 'topRight'\n        })\n    }\n\n})\n\n"],"names":["getImagesByQuery","query","page","axios","refs","modal","SimpleLightbox","createGallery","images","markup","el","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","totalPage","e","iziToast","response","err","rect"],"mappings":"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"}